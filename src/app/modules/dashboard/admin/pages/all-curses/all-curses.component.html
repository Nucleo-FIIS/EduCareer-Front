<div class="bg-gray-50 select-none h-screen">
    <header-admin></header-admin>

    <sidebar-admin breadcrumb1="Dashboard" breadcrumb2="Lista de cursos"></sidebar-admin>

    <!-- Content -->
    <div class="w-full pt-10 px-4 sm:px-6 md:px-8 lg:ps-72">
        <!-- Search and Filter -->
        <section>
            <label class="mt-4 block text-sm font-medium text-gray-900 text-center sm:text-start"> Buscar por </label>
            <div class="flex items-center flex-col sm:flex-row">

                <!-- Filter Button with Icon -->
                <div class="relative">
                    <button (click)="toggleFilterMenu()"
                        class="flex items-center justify-between bg-gray-50 p-2 rounded-lg border border-gray-300 text-gray-700 text-sm sm:text-sm focus:outline-none"
                        style="width: 200px;"> <!-- Definir el ancho del botón -->
                        <div class="flex items-center">
                            <ng-container [ngSwitch]="selectedFilter">
                                <svg *ngSwitchCase="'name'" class="w-5 h-5 inline" xmlns="http://www.w3.org/2000/svg"
                                    fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M5 15l7-7 7 7" />
                                </svg>
                                <svg *ngSwitchCase="'nameDesc'" class="w-5 h-5 inline"
                                    xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M19 9l-7 7-7-7" />
                                </svg>
                                <svg *ngSwitchCase="'email'" class="w-5 h-5 inline" xmlns="http://www.w3.org/2000/svg"
                                    fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M5 15l7-7 7 7" />
                                </svg>
                                <svg *ngSwitchCase="'emailDesc'" class="w-5 h-5 inline"
                                    xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M19 9l-7 7-7-7" />
                                </svg>
                                <svg *ngSwitchCase="'lastLogin'" class="w-5 h-5 inline"
                                    xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M5 15l7-7 7 7" />
                                </svg>
                                <svg *ngSwitchCase="'lastLoginDesc'" class="w-5 h-5 inline"
                                    xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M19 9l-7 7-7-7" />
                                </svg>
                                <svg *ngSwitchCase="'User'" class="w-5 h-5 inline" xmlns="http://www.w3.org/2000/svg"
                                    fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path
                                        d="M16 7C16 9.20914 14.2091 11 12 11C9.79086 11 8 9.20914 8 7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7Z"
                                        stroke="#000000" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round" />
                                    <path d="M12 14C8.13401 14 5 17.134 5 21H19C19 17.134 15.866 14 12 14Z"
                                        stroke="#000000" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round" />
                                </svg>
                                <svg *ngSwitchCase="'Admin'" class="w-5 h-5 inline" xmlns="http://www.w3.org/2000/svg"
                                    fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path
                                        d="M11 21H4C4 17.4735 6.60771 14.5561 10 14.0709M19.8726 15.2038C19.8044 15.2079 19.7357 15.21 19.6667 15.21C18.6422 15.21 17.7077 14.7524 17 14C16.2923 14.7524 15.3578 15.2099 14.3333 15.2099C14.2643 15.2099 14.1956 15.2078 14.1274 15.2037C14.0442 15.5853 14 15.9855 14 16.3979C14 18.6121 15.2748 20.4725 17 21C18.7252 20.4725 20 18.6121 20 16.3979C20 15.9855 19.9558 15.5853 19.8726 15.2038ZM15 7C15 9.20914 13.2091 11 11 11C8.79086 11 7 9.20914 7 7C7 4.79086 8.79086 3 11 3C13.2091 3 15 4.79086 15 7Z"
                                        stroke="#000000" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round" />
                                </svg>
                                <span *ngSwitchDefault>Filtrar</span>
                            </ng-container>
                            <span class="ml-2">{{ selectedFilterLabel() }}</span>
                        </div>
                    </button>
                    <!-- Filter Dropdown Menu -->
                    <div *ngIf="showFilterMenu" class="absolute z-10 mt-2 w-48 bg-white rounded-lg shadow-lg">
                        <ul class="text-gray-700 text-sm">
                            <li>
                                <button (click)="sort('name')"
                                    class="block w-full text-left px-4 py-2 hover:bg-gray-100">
                                    <svg class="w-4 h-4 inline" xmlns="http://www.w3.org/2000/svg" fill="none"
                                        viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M5 15l7-7 7 7" />
                                    </svg> Nombre
                                </button>
                            </li>
                            <li>
                                <button (click)="sort('nameDesc')"
                                    class="block w-full text-left px-4 py-2 hover:bg-gray-100">
                                    <svg class="w-4 h-4 inline" xmlns="http://www.w3.org/2000/svg" fill="none"
                                        viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M19 9l-7 7-7-7" />
                                    </svg> Nombre
                                </button>
                            </li>
                            <li>
                                <button (click)="sort('email')"
                                    class="block w-full text-left px-4 py-2 hover:bg-gray-100">
                                    <svg class="w-4 h-4 inline" xmlns="http://www.w3.org/2000/svg" fill="none"
                                        viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M5 15l7-7 7 7" />
                                    </svg> Email
                                </button>
                            </li>
                            <li>
                                <button (click)="sort('emailDesc')"
                                    class="block w-full text-left px-4 py-2 hover:bg-gray-100">
                                    <svg class="w-4 h-4 inline" xmlns="http://www.w3.org/2000/svg" fill="none"
                                        viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M19 9l-7 7-7-7" />
                                    </svg> Email
                                </button>
                            </li>
                            <li>
                                <button (click)="sort('lastLogin')"
                                    class="block w-full text-left px-4 py-2 hover:bg-gray-100">
                                    <svg class="w-4 h-4 inline" xmlns="http://www.w3.org/2000/svg" fill="none"
                                        viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M5 15l7-7 7 7" />
                                    </svg> Última Conexión
                                </button>
                            </li>
                            <li>
                                <button (click)="sort('lastLoginDesc')"
                                    class="block w-full text-left px-4 py-2 hover:bg-gray-100">
                                    <svg class="w-4 h-4 inline" xmlns="http://www.w3.org/2000/svg" fill="none"
                                        viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M19 9l-7 7-7-7" />
                                    </svg> Última Conexión
                                </button>
                            </li>
                            <li>
                                <button (click)="filterByType('User')"
                                    class="block w-full text-left px-4 py-2 hover:bg-gray-100">
                                    <svg class="w-4 h-4 inline" xmlns="http://www.w3.org/2000/svg" fill="none"
                                        viewBox="0 0 24 24" stroke="currentColor">
                                        <path
                                            d="M16 7C16 9.20914 14.2091 11 12 11C9.79086 11 8 9.20914 8 7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7Z"
                                            stroke="#000000" stroke-width="2" stroke-linecap="round"
                                            stroke-linejoin="round" />
                                        <path d="M12 14C8.13401 14 5 17.134 5 21H19C19 17.134 15.866 14 12 14Z"
                                            stroke="#000000" stroke-width="2" stroke-linecap="round"
                                            stroke-linejoin="round" />
                                    </svg> User
                                </button>
                            </li>
                            <li>
                                <button (click)="filterByType('Admin')"
                                    class="block w-full text-left px-4 py-2 hover:bg-gray-100">
                                    <svg class="w-4 h-4 inline" xmlns="http://www.w3.org/2000/svg" fill="none"
                                        viewBox="0 0 24 24" stroke="currentColor">
                                        <path
                                            d="M11 21H4C4 17.4735 6.60771 14.5561 10 14.0709M19.8726 15.2038C19.8044 15.2079 19.7357 15.21 19.6667 15.21C18.6422 15.21 17.7077 14.7524 17 14C16.2923 14.7524 15.3578 15.2099 14.3333 15.2099C14.2643 15.2099 14.1956 15.2078 14.1274 15.2037C14.0442 15.5853 14 15.9855 14 16.3979C14 18.6121 15.2748 20.4725 17 21C18.7252 20.4725 20 18.6121 20 16.3979C20 15.9855 19.9558 15.5853 19.8726 15.2038ZM15 7C15 9.20914 13.2091 11 11 11C8.79086 11 7 9.20914 7 7C7 4.79086 8.79086 3 11 3C13.2091 3 15 4.79086 15 7Z"
                                            stroke="#000000" stroke-width="2" stroke-linecap="round"
                                            stroke-linejoin="round" />
                                    </svg> Admin
                                </button>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- Search -->
                <div class="flex ml-2 items-center mb-4 mt-4 w-full">
                    <div class="relative w-full">
                        <input type="text" id="simple-search" [(ngModel)]="searchTerm" (input)="filterUsers()"
                            class="disabled:opacity-50 disabled:pointer-events-none disabled:select-none bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg block w-full ps-10 p-2.5 focus:outline-none focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm focus:ring-1"
                            placeholder="Buscar..." />
                    </div>
                    <button type="submit" (click)="clearSearch()"
                        class="disabled:opacity-50 disabled:pointer-events-none disabled:select-none p-2.5 ms-2 text-sm font-medium text-white bg-indigo-700 rounded-lg border border-indigo-700 hover:bg-indigo-800 focus:outline-none dark:bg-indigo-600 dark:hover:bg-indigo-700 dark:focus:ring-indigo-800">
                        <svg class="w-4 h-4" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
                            viewBox="0 0 24 24">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M5 7h14m-9 3v8m4-8v8M10 3h4a1 1 0 0 1 1 1v3H9V4a1 1 0 0 1 1-1ZM6 7h12v13a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7Z" />
                        </svg>
                        <span class="sr-only">Clean</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- Table -->
        <div class="bg-white rounded-xl shadow p-4 sm:p-7">
            <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-100">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            Nombre</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tipo
                        </th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">F.
                            Registro</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            Última Conexión</th>
                        <th class="px-6 py-3"></th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200">
                    <tr *ngFor="let user of filteredUsers">
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm font-medium text-gray-900">{{ user.name }}</div>
                            <div class="text-sm text-gray-500">{{ user.email }}</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">{{ user.type }}</td>
                        <td class="px-6 py-4 whitespace-nowrap">{{ user.registrationDate }}</td>
                        <td class="px-6 py-4 whitespace-nowrap">{{ user.lastLogin }}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-right">
                            <div class="relative inline-block text-left">
                                <button (click)="toggleMenu(user)"
                                    class="text-gray-500 hover:text-gray-700 focus:outline-none">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                        stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M6.75 12h10.5M12 6.75l5.25 5.25L12 17.25" />
                                    </svg>
                                </button>
                                <!-- Dropdown menu -->
                                <div *ngIf="user.showMenu"
                                    class="origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none">
                                    <div class="py-1">
                                        <a href="#"
                                            class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Cambiar
                                            Role</a>
                                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Ver
                                            Perfil</a>
                                        <a href="#" (click)="deleteUser(user)"
                                            class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Eliminar</a>
                                    </div>
                                </div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <!-- End Table -->
    </div>
    <!-- End Content -->
</div>
