<div class="bg-gray-50 select-none h-screen">
  <header-user></header-user>

  <sidebar-user breadcrumb1="Dashboard" breadcrumb2="Editar perfil"></sidebar-user>

  <!-- Content -->
  <div class="w-full pt-10 px-4 sm:px-6 md:px-8 lg:ps-72">
    <!-- Card Section -->
    <div class="max-w-4xl px-4 py-10 sm:px-6 lg:px-8 lg:py-14 mx-auto">
      <!-- Card -->
      <div class="bg-white rounded-xl shadow p-4 sm:p-7">
        <div class="mb-8">
          <h2 class="text-xl font-bold text-gray-800">Perfil</h2>
          <p class="text-sm text-gray-600">
            Administre su nombre, contraseña y configuración de cuenta.
          </p>
        </div>

        <!-- Formulario -->
        <form [formGroup]="profileForm" id="profileForm" enctype="multipart/form-data">
          <!-- Grid -->
          <div class="grid sm:grid-cols-12 gap-2 sm:gap-6">
            <!-- Foto de perfil -->
            <div class="sm:col-span-3">
              <label class="inline-block text-sm text-gray-800 mt-2.5">Foto de perfil</label>
            </div>

            <div class="sm:col-span-9">
              <div class="flex items-center gap-5">
                <img id="profile-image" class="inline-block size-16 rounded-full ring-2 ring-white" [src]="imageUrl"
                  alt="Image Description">
                <div class="flex gap-x-2">
                  <div>
                    <input type="file" id="upload-photo" name="profilePhoto" class="hidden" accept="image/*"
                      (change)="onFileSelected($event)">

                    <button type="button"
                      class="py-2 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50"
                      (click)="triggerFileInput()">
                      Subir foto
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Nombre completo -->
            <div class="sm:col-span-3">
              <label for="nombre" class="inline-block text-sm text-gray-800 mt-2.5">Nombre completo</label>
            </div>

            <div class="sm:col-span-9">
              <input id="nombre" formControlName="nombre" name="nombre" type="text"
                class="focus:ring-1 focus:outline-none py-2 px-3 block w-full border border-gray-200 shadow-sm text-sm rounded-lg focus:border-blue-500 focus:ring-blue-500 placeholder:text-gray-700"
                placeholder="John Doe">
            </div>

            <!-- Email -->
            <div class="sm:col-span-3">
              <label for="af-account-email" class="inline-block text-sm text-gray-800 mt-2.5">Email</label>
            </div>

            <div class="sm:col-span-9">
              <input id="af-account-email" name="email" type="email" disabled
                class="focus:ring-1 focus:outline-none py-2 px-3 block w-full border border-gray-200 shadow-sm text-sm rounded-lg focus:border-blue-500 focus:ring-blue-500 placeholder:text-gray-700"
                placeholder="john.doe@example.com">
            </div>

            <!-- Contraseña -->
            <div class="sm:col-span-3">
              <label for="password" class="inline-block text-sm text-gray-800 mt-2.5">Contraseña</label>
            </div>

            <div class="sm:col-span-9">
              <div class="space-y-2">
                <input id="old_password" formControlName="old_password" name="old_password" type="password"
                  class="focus:ring-1 focus:outline-none py-2 px-3 block w-full border border-gray-200 shadow-sm rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500"
                  placeholder="Introduzca la contraseña actual">
                <input id="password" formControlName="password" name="password" type="password"
                  class="focus:ring-1 focus:outline-none py-2 px-3 block w-full border border-gray-200 shadow-sm rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500"
                  placeholder="Introduzca la nueva contraseña">
              </div>
            </div>

            <!-- Género -->
            <div class="sm:col-span-3">
              <label for="genero" class="inline-block text-sm text-gray-800 mt-2.5">Género</label>
            </div>

            <div class="sm:col-span-9">
              <select id="genero" formControlName="genero"
                class="focus:ring-1 focus:outline-none py-2 px-3 block w-full border border-gray-200 shadow-sm text-sm rounded-lg focus:border-blue-500 focus:ring-blue-500">
                <option value="">Seleccione un género</option>
                <option value="Masculino">Masculino</option>
                <option value="Femenino">Femenino</option>
              </select>
            </div>

            <!-- Carrera -->
            <div class="sm:col-span-3">
              <label for="carrera" class="inline-block text-sm text-gray-800 mt-2.5">Carrera</label>
            </div>

            <div class="sm:col-span-9">
              <select id="carrera" formControlName="carrera"
                class="focus:ring-1 focus:outline-none py-2 px-3 block w-full border border-gray-200 shadow-sm text-sm rounded-lg focus:border-blue-500 focus:ring-blue-500">
                <option value="">Seleccione una carrera</option>
                <option value="1">Sistemas</option>
                <option value="2">Industrial</option>
              </select>
            </div>

            <!-- Mensaje de éxito -->
            <div class="sm:col-span-12">
              <p *ngIf="successMessage" class="text-sm text-green-600">{{ successMessage }}</p>
            </div>

            <!-- Submit button -->
            <div class="sm:col-span-12">
              <div class="mt-5 flex justify-end gap-x-2">
                <button type="button"
                  class="py-2 px-3 inline-flex justify-center items-center gap-x-3 text-sm font-medium text-white shadow-sm rounded-lg bg-green-600 hover:bg-green-500 focus:ring-2 focus:ring-offset-2 focus:ring-blue-600 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-green-600"
                  [disabled]="isButtonDisabled" (click)="updateProfile()">
                  Guardar cambios
                </button>
              </div>
            </div>
          </div>
          <!-- End Grid -->
        </form>
        <!-- End Form -->
      </div>
      <!-- End Card -->
    </div>
    <!-- End Card Section -->
  </div>
  <!-- End Content -->
</div>